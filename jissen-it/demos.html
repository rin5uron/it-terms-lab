<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="実践型IT用語辞典の体験デモ一覧ページ。実際に手を動かしてIT用語を学べます。">
  <title>体験デモ一覧 | 実践型IT用語辞典</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="container">
      <div class="hamburger-menu" id="hamburgerMenu" role="button" aria-label="メニューを開閉する" aria-controls="navMenu" aria-expanded="false">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
      <div class="theme-switcher-container">
        <button id="themeSwitcher" aria-label="テーマを切り替える">🌙</button>
      </div>
      <h1>実践型IT用語辞典</h1>
      <p class="subtitle">「読んで終わり」じゃなく、「動かして理解する」</p>
      <nav id="navMenu">
        <ul>
          <li><a href="index.html#popular">人気用語</a></li>
          <li><a href="index.html#demo">体験デモ</a></li>
          <li><a href="index.html#new">新着用語</a></li>
          <li><a href="index.html#about">制作背景</a></li>
          <li><a href="form/request.html">用語リクエスト</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="breadcrumb">
      <a href="index.html">🏠 トップ</a> / 体験デモ一覧
    </div>

    <section>
      <h2>体験デモ一覧</h2>
      <p>ここでは、実際に手を動かしてIT用語を体験できるデモを一覧で紹介しています。</p>
    </section>

    <section id="sql-insert-demo" class="demo-section">
      <h2>体験デモ - SQL INSERT文</h2>
      <p>実際にボタンを押して、データベースへの挿入を体験してみましょう！</p>
      
      <div class="demo-area">
        <h3>ユーザー情報を追加</h3>
        <label for="userName">名前</label>
        <input type="text" id="userName" placeholder="田中太郎">
        
        <label for="userAge">年齢</label>
        <input type="number" id="userAge" placeholder="25">
        
        <button onclick="insertUser()" class="cta-button">INSERT実行</button>
      </div>
      
      <div class="demo-output" id="sqlOutput" aria-live="polite">
        -- ここにSQL文と結果が表示されます --
      </div>
      
      <h3>現在のデータベース内容</h3>
      <div class="demo-output" id="dbContent" aria-live="polite">
        []
      </div>
    </section>

    <section id="ip-address-demo" class="demo-section">
      <h2>体験デモ - IPアドレス</h2>
      <p>実際にあなたのIPアドレスを調べたり、IPアドレスの種類を分析してみましょう！</p>
      
      <div class="demo-area">
        <h3>現在のIPアドレス情報</h3>
        <button class="btn" onclick="getMyIP()">🔍 私のIPアドレスを調べる</button>
        
        <div id="ipResult" class="ip-info-card" style="display: none;">
          <h4>📍 あなたのIPアドレス情報</h4>
          <p><strong>IPアドレス:</strong> <span id="ipAddress">取得中...</span></p>
          <p><strong>所在地:</strong> <span id="location">取得中...</span></p>
          <p><strong>ISP:</strong> <span id="isp">取得中...</span></p>
          <p><strong>IPタイプ:</strong> <span id="ipType">取得中...</span></p>
        </div>
      </div>
      
      <div class="demo-area">
        <h3>IPアドレスの種類を調べる</h3>
        <div class="input-group">
          <label for="ipInput">IPアドレスを入力してください</label>
          <input type="text" id="ipInput" placeholder="例: 192.168.1.1">
        </div>
        <button class="btn" onclick="analyzeIP()">🔍 分析する</button>
        
        <div class="output" id="analysisResult">
ここに分析結果が表示されます...
        </div>
      </div>
    </section>

    <!-- 今後追加されるデモセクションをここに追加 -->

  </main>

  <footer>
    <div class="container">
      <div class="footer-links">
        <a href="form/request.html">用語リクエスト</a>
        <a href="rss.xml" target="_blank">RSS</a>
      </div>
      <div class="sns-share">
        <a href="#" id="shareTwitter" target="_blank" aria-label="Twitterでシェア">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        </a>
        <a href="#" id="shareFacebook" target="_blank" aria-label="Facebookでシェア">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
        </a>
      </div>
      <p>&copy; 2025 実践型IT用語辞典 | Jissen IT</p>
    </div>
  </footer>

  <script>
    // Hamburger Menu
    document.getElementById('hamburgerMenu').addEventListener('click', function() {
      document.getElementById('navMenu').classList.toggle('active');
    });

    // Theme Switcher
    const themeSwitcher = document.getElementById('themeSwitcher');
    const body = document.body;

    const currentTheme = localStorage.getItem('theme');

    const applyTheme = (theme) => {
      if (theme === 'dark') {
        body.classList.add('dark-mode');
        themeSwitcher.textContent = '☀️';
      } else {
        body.classList.remove('dark-mode');
        themeSwitcher.textContent = '🌙';
      }
    };

    if (currentTheme) {
      applyTheme(currentTheme);
    } else {
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      applyTheme(prefersDark ? 'dark' : 'light');
    }

    themeSwitcher.addEventListener('click', () => {
      let newTheme;
      if (body.classList.contains('dark-mode')) {
        newTheme = 'light';
      } else {
        newTheme = 'dark';
      }
      applyTheme(newTheme);
      localStorage.setItem('theme', newTheme);
    });

    // SQL INSERT体験デモの関数 (index.htmlからコピー)
    let users = [];
    let nextId = 1;
    function insertUser() {
      const name = document.getElementById('userName').value.trim();
      const age = document.getElementById('userAge').value;
      if (!name || !age) {
        alert('名前と年齢を入力してください');
        return;
      }
      const user = { name, age: parseInt(age) };
      users.push(user);
      const sqlOutput = document.getElementById('sqlOutput');
      sqlOutput.innerHTML = `INSERT INTO users (name, age) VALUES ('${name}', ${age});\n-- ✅ 実行完了: 1行が挿入されました`;
      const dbContent = document.getElementById('dbContent');
      dbContent.innerHTML = JSON.stringify(users, null, 2);
      document.getElementById('userName').value = '';
      document.getElementById('userAge').value = '';
    }

    // IPアドレス体験デモの関数 (ip-address.htmlからコピー)
    async function getMyIP() {
      const resultDiv = document.getElementById('ipResult');
      const ipAddress = document.getElementById('ipAddress');
      const location = document.getElementById('location');
      const isp = document.getElementById('isp');
      const ipType = document.getElementById('ipType');
      resultDiv.style.display = 'block';
      try {
        const response = await fetch('https://ipapi.co/json/');
        const data = await response.json();
        ipAddress.textContent = data.ip || '取得できませんでした';
        location.textContent = `${data.city || '不明'}, ${data.country_name || '不明'}`;
        isp.textContent = data.org || '不明';
        const ip = data.ip;
        if (ip) {
          ipType.textContent = determineIPType(ip);
        } else {
          ipType.textContent = '判定できません';
        }
      } catch (error) {
        ipAddress.textContent = '取得に失敗しました';
        location.textContent = 'APIエラー';
        isp.textContent = 'APIエラー';
        ipType.textContent = '判定できません';
        console.error('IP取得エラー:', error);
      }
    }
    
    function determineIPType(ip) {
      const parts = ip.split('.').map(Number);
      if (parts[0] === 10) {
        return 'プライベートIP (クラスA)';
      } else if (parts[0] === 172 && parts[1] >= 16 && parts[1] <= 31) {
        return 'プライベートIP (クラスB)';
      } else if (parts[0] === 192 && parts[1] === 168) {
        return 'プライベートIP (クラスC)';
      } else {
        return 'パブリックIP';
      }
    }
    
    function analyzeIP() {
      const ipInput = document.getElementById('ipInput').value.trim();
      const resultDiv = document.getElementById('analysisResult');
      if (!ipInput) {
        resultDiv.textContent = 'IPアドレスを入力してください';
        return;
      }
      const ipPattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
      const match = ipInput.match(ipPattern);
      if (!match) {
        resultDiv.textContent = '有効なIPアドレスの形式ではありません\n例: 192.168.1.1';
        return;
      }
      const parts = match.slice(1).map(Number);
      if (parts.some(part => part < 0 || part > 255)) {
        resultDiv.textContent = '各数値は0〜255の範囲で入力してください';
        return;
      }
      let result = `📊 IPアドレス分析結果\n`;
      result += `━━━━━━━━━━━━━━━━━━━━━━━━\n`;
      result += `入力されたIP: ${ipInput}\n\n`;
      result += `🏷️ IPタイプ: ${determineIPType(ipInput)}\n\n`;
      if (parts[0] <= 126) {
        result += `📂 クラス: A (1-126)\n`;
        result += `💡 大規模ネットワーク用\n`;
      } else if (parts[0] <= 191) {
        result += `📂 クラス: B (128-191)\n`;
        result += `💡 中規模ネットワーク用\n`;
      } else if (parts[0] <= 223) {
        result += `📂 クラス: C (192-223)\n`;
        result += `💡 小規模ネットワーク用\n`;
      } else {
        result += `📂 クラス: D/E (224-255)\n`;
        result += `💡 特殊用途\n`;
      }
      if (ipInput === '127.0.0.1') {
        result += `\n🏠 ローカルホスト (自分自身)`;
      } else if (ipInput === '255.255.255.255') {
        result += `\n📢 ブロードキャストアドレス`;
      } else if (parts[0] === 169 && parts[1] === 254) {
        result += `\n🔧 APIPA (自動IP設定)`;
      }
      resultDiv.textContent = result;
    }
  </script>
</body>
</html>